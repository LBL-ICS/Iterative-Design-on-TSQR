file:///C:/Users/blair/OneDrive/Documents/Desktop/iterative_tsqr/src/main/scala/tsqr_fsm.scala
### scala.reflect.internal.FatalError: 
  ThisType(value <local fsm>) for sym which is not a class
     while compiling: file:///C:/Users/blair/OneDrive/Documents/Desktop/iterative_tsqr/src/main/scala/tsqr_fsm.scala
        during phase: globalPhase=<no phase>, enteringPhase=parser
     library version: version 2.13.7
    compiler version: version 2.13.7
  reconstructed args: -classpath <WORKSPACE>\.bloop\root\bloop-bsp-clients-classes\classes-Metals-jM3agBIuReSsG3AMomTa5Q==;<HOME>\AppData\Local\bloop\cache\semanticdb\com.sourcegraph.semanticdb-javac.0.10.0\semanticdb-javac-0.10.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\scala-library\2.13.7\scala-library-2.13.7.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chiseltest_2.13\0.5.0\chiseltest_2.13-0.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3_2.13\3.5.0\chisel3_2.13-3.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\treadle_2.13\1.5.0\treadle_2.13-1.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scalatest\scalatest_2.13\3.1.4\scalatest_2.13-3.1.4.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\utest_2.13\0.7.9\utest_2.13-0.7.9.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\net\java\dev\jna\jna\5.10.0\jna-5.10.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\scala-reflect\2.13.7\scala-reflect-2.13.7.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3-macros_2.13\3.5.0\chisel3-macros_2.13-3.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3-core_2.13\3.5.0\chisel3-core_2.13-3.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\os-lib_2.13\0.8.0\os-lib_2.13-0.8.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\firrtl_2.13\1.5.0\firrtl_2.13-1.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-jline\2.12.1\scala-jline-2.12.1.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scalactic\scalactic_2.13\3.1.4\scalactic_2.13-3.1.4.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-xml_2.13\1.2.0\scala-xml_2.13-1.2.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-sbt\test-interface\1.0\test-interface-1.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\portable-scala\portable-scala-reflect_2.13\0.1.1\portable-scala-reflect_2.13-0.1.1.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\geny_2.13\0.7.0\geny_2.13-0.7.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\antlr\antlr4-runtime\4.9.3\antlr4-runtime-4.9.3.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\google\protobuf\protobuf-java\3.18.0\protobuf-java-3.18.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\github\scopt\scopt_2.13\3.7.1\scopt_2.13-3.7.1.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\net\jcazevedo\moultingyaml_2.13\0.4.2\moultingyaml_2.13-0.4.2.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-native_2.13\3.6.12\json4s-native_2.13-3.6.12.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\apache\commons\commons-text\1.9\commons-text-1.9.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\io\github\alexarchambault\data-class_2.13\0.2.5\data-class_2.13-0.2.5.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-parallel-collections_2.13\1.0.4\scala-parallel-collections_2.13-1.0.4.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\fusesource\jansi\jansi\1.11\jansi-1.11.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\github\nscala-time\nscala-time_2.13\2.22.0\nscala-time_2.13-2.22.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\yaml\snakeyaml\1.26\snakeyaml-1.26.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-core_2.13\3.6.12\json4s-core_2.13-3.6.12.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\apache\commons\commons-lang3\3.11\commons-lang3-3.11.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\joda-time\joda-time\2.10.1\joda-time-2.10.1.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\joda\joda-convert\2.2.0\joda-convert-2.2.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-ast_2.13\3.6.12\json4s-ast_2.13-3.6.12.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-scalap_2.13\3.6.12\json4s-scalap_2.13-3.6.12.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\thoughtworks\paranamer\paranamer\2.8\paranamer-2.8.jar -Xplugin-require:semanticdb -Yrangepos -Ymacro-expand:discard -Ycache-plugin-class-loader:last-modified -Ypresentation-any-thread

  last tree to typer: Ident(rtri_mem_wea_reg)
       tree position: line 292 of file:///C:/Users/blair/OneDrive/Documents/Desktop/iterative_tsqr/src/main/scala/tsqr_fsm.scala
            tree tpe: <error>
              symbol: value <error: <none>>
   symbol definition: val <error: <none>>: <error> (a TermSymbol)
      symbol package: tsqr_fsm_package
       symbol owners: value <error: <none>> -> value <local fsm> -> class fsm -> object chisel_fsm
           call site: <none> in <none>

== Source file context for tree position ==

   289         }.otherwise{
   290             dmx0_mem_wea_reg := dmx0_mem_wea_reg
   291             dmx1_mem_wea_reg := dmx1_mem_wea_reg
   292             rtri_mem_wea_reg := rtri_mem_wea_reg
   293         }
   294 
   295         val dmx0_mem_addra_reg = Reg(UInt((log2Ceil(total_st)-1).W))

occurred in the presentation compiler.

presentation compiler configuration:
Scala version: 2.13.7
Classpath:
<WORKSPACE>\.bloop\root\bloop-bsp-clients-classes\classes-Metals-jM3agBIuReSsG3AMomTa5Q== [exists ], <HOME>\AppData\Local\bloop\cache\semanticdb\com.sourcegraph.semanticdb-javac.0.10.0\semanticdb-javac-0.10.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\scala-library\2.13.7\scala-library-2.13.7.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chiseltest_2.13\0.5.0\chiseltest_2.13-0.5.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3_2.13\3.5.0\chisel3_2.13-3.5.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\treadle_2.13\1.5.0\treadle_2.13-1.5.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scalatest\scalatest_2.13\3.1.4\scalatest_2.13-3.1.4.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\utest_2.13\0.7.9\utest_2.13-0.7.9.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\net\java\dev\jna\jna\5.10.0\jna-5.10.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\scala-reflect\2.13.7\scala-reflect-2.13.7.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3-macros_2.13\3.5.0\chisel3-macros_2.13-3.5.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3-core_2.13\3.5.0\chisel3-core_2.13-3.5.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\os-lib_2.13\0.8.0\os-lib_2.13-0.8.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\firrtl_2.13\1.5.0\firrtl_2.13-1.5.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-jline\2.12.1\scala-jline-2.12.1.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scalactic\scalactic_2.13\3.1.4\scalactic_2.13-3.1.4.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-xml_2.13\1.2.0\scala-xml_2.13-1.2.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-sbt\test-interface\1.0\test-interface-1.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\portable-scala\portable-scala-reflect_2.13\0.1.1\portable-scala-reflect_2.13-0.1.1.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\geny_2.13\0.7.0\geny_2.13-0.7.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\antlr\antlr4-runtime\4.9.3\antlr4-runtime-4.9.3.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\google\protobuf\protobuf-java\3.18.0\protobuf-java-3.18.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\github\scopt\scopt_2.13\3.7.1\scopt_2.13-3.7.1.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\net\jcazevedo\moultingyaml_2.13\0.4.2\moultingyaml_2.13-0.4.2.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-native_2.13\3.6.12\json4s-native_2.13-3.6.12.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\apache\commons\commons-text\1.9\commons-text-1.9.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\io\github\alexarchambault\data-class_2.13\0.2.5\data-class_2.13-0.2.5.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-parallel-collections_2.13\1.0.4\scala-parallel-collections_2.13-1.0.4.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\fusesource\jansi\jansi\1.11\jansi-1.11.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\github\nscala-time\nscala-time_2.13\2.22.0\nscala-time_2.13-2.22.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\yaml\snakeyaml\1.26\snakeyaml-1.26.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-core_2.13\3.6.12\json4s-core_2.13-3.6.12.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\apache\commons\commons-lang3\3.11\commons-lang3-3.11.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\joda-time\joda-time\2.10.1\joda-time-2.10.1.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\joda\joda-convert\2.2.0\joda-convert-2.2.0.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-ast_2.13\3.6.12\json4s-ast_2.13-3.6.12.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-scalap_2.13\3.6.12\json4s-scalap_2.13-3.6.12.jar [exists ], <HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\thoughtworks\paranamer\paranamer\2.8\paranamer-2.8.jar [exists ]
Options:
-Yrangepos -Xplugin-require:semanticdb


action parameters:
offset: 9313
uri: file:///C:/Users/blair/OneDrive/Documents/Desktop/iterative_tsqr/src/main/scala/tsqr_fsm.scala
text:

```scala
/** ***********************************
 * 10-19-2023
 * Author: Blair Reasoner
 * Release version: 1
 * ********************************* */

package tsqr_fsm_package

import chisel3._
import chisel3.util._
import Chisel.{log2Ceil, log2Floor}
import chiseltest.RawTester.test
import chisel3.tester._
import chisel3.{RawModule, withClockAndReset}
import java.io.PrintWriter
import scala.collection.mutable

object Main {
  def main(args: Array[String]): Unit = {
    val sw2 = new PrintWriter("fsm.v")

    // sw2.println(getVerilogString(new chisel_fsm.fsm(32, 16, 16)))
    sw2.close()
  }
}

object chisel_fsm {
  class fsm(bw: Int, total_st: Int, streaming_width: Int, ddot_st: Int, CNT_WIDTH: Int) extends RawModule {

    val clk = IO(Input(Clock()))
    val rst = IO(Input(Bool()))
    val tsqr_en = IO(Input(Bool()))
    val tile_no = IO(Input(UInt((CNT_WIDTH).W)))
    val hh_cnt = IO(Output((UInt((CNT_WIDTH).W))))
    val mx_cnt = IO(Output((UInt((CNT_WIDTH).W))))
    val d1_rdy = IO(Output(Bool()))
    val d1_vld = IO(Output(Bool()))


    val vk1_vld = IO(Output(Bool()))


    val tk_vld = IO(Output(Bool()))


    val yjp_vld = IO(Output(Bool()))
    val yj_sft = IO(Output(Bool()))

    val hh_st = IO(Output(Bool()))
    val mem0_fi = IO(Output(Bool()))
    val mem1_fi = IO(Output(Bool()))
    val tsqr_fi = IO(Output(Bool()))
    val dmx0_mem_ena = IO(Output(Bool()))
    val dmx0_mem_wea = IO(Output(UInt((total_st * 4).W)))
    val dmx0_mem_addra = IO(Output(UInt((log2Ceil(total_st) - 1).W)))
    val dmx0_mem_enb = IO(Output(Bool()))
    val dmx0_mem_addrb = IO(Output(UInt((log2Ceil(total_st) - 1).W)))
    val dmx1_mem_ena = IO(Output(Bool()))
    val dmx1_mem_wea = IO(Output(UInt((total_st * 4).W)))
    val dmx1_mem_addra = IO(Output(UInt((log2Ceil(total_st) - 1).W)))
    val dmx1_mem_enb = IO(Output(Bool()))
    val dmx1_mem_addrb = IO(Output(UInt((log2Ceil(total_st) - 1).W)))
    val rtri_mem_ena = IO(Output(Bool()))
    val rtri_mem_wea = IO(Output(UInt((total_st * 4).W)))
    val rtri_mem_addra = IO(Output(UInt((log2Ceil(total_st) - 1).W)))
    val rtri_mem_enb = IO(Output(Bool()))
    val rtri_mem_addrb = IO(Output(UInt((log2Ceil(total_st) - 1).W)))

    withClockAndReset(clk, rst) {
      val DDOT1_CY = log2Ceil(ddot_st * 2) * 13 + 11 + 13 * (((log2Ceil(total_st / ddot_st) - 1)) + 1)
      val DDOT2_CY = log2Ceil(streaming_width) * 13 + 24 + 13 * (((log2Ceil(total_st / streaming_width) - 1)) + 1)
      val HQR3_CY = 139 //sqrt 
      //val HQR3_CY = 29   
      val HQR5_CY = 83 // 330 
      val HQR6_CY = 36
      //val HQR5_CY = 36
      val HQR7_CY = 24 //129
      //val HQR7_CY = 29
      val HQR10_CY = 23
      val HQR11_CY = 36
      val YJ_SFT_NO = DDOT2_CY + HQR10_CY //+ HQR7_CY+1

      val MEM_RD_CY = 2
      val VK_CY = DDOT1_CY + HQR3_CY + HQR5_CY
      val TK_CY = VK_CY + HQR6_CY + HQR7_CY
      val TR_CY_MACRO = DDOT2_CY + HQR10_CY + HQR11_CY //- MEM_RD_CY + HQR7_CY
      val HH_CY = MEM_RD_CY + VK_CY + TR_CY_MACRO + total_st / streaming_width + 1 //edit 1-19-24

      val hh_en = RegInit(0.B)

      when(mem0_fi | mem1_fi) {
        hh_en := 0.U
      }.elsewhen(tsqr_en) {
        hh_en := 1.U
      }


      def counter(max: UInt, enable: Bool) = {
        val x = RegInit(0.asUInt(max.getWidth.W))
        x := Mux(~enable, 0.U, Mux(x === max, 0.U, x + 1.U))
        x
      }

      def pulse(n: UInt, enable: Bool) = counter((n), enable) === (n)


      val cnt = counter((HH_CY.U), hh_en)

      val nxt_hh_cnt = Reg(UInt(CNT_WIDTH.W))
      val nxt_mx_cnt = Reg(UInt(CNT_WIDTH.W))


      when((cnt === (HH_CY).U) & (hh_cnt === (total_st.U / 2.U - 1.U))) {
        nxt_hh_cnt := 0.U
      }.elsewhen(hh_en & (cnt === (HH_CY).U)) {
        nxt_hh_cnt := hh_cnt + 1.U
      }.otherwise {
        nxt_hh_cnt := hh_cnt
      }

      when((hh_cnt === (total_st / 2 - 1).U) & (mx_cnt === (tile_no)) & (cnt === (HH_CY).U)) { //tile_no -1
        nxt_mx_cnt := 0.U
      }.elsewhen((hh_cnt === (total_st / 2 - 1).U) & (cnt === (HH_CY).U - 1.U)) { //hh_en &//change 3/20/24
        nxt_mx_cnt := mx_cnt + 1.U
      }.otherwise {
        nxt_mx_cnt := mx_cnt
      }

      when(rst) {
        hh_cnt := 0.U
        mx_cnt := 0.U
      }.otherwise {
        hh_cnt := nxt_hh_cnt
        mx_cnt := nxt_mx_cnt
      }


      val tr_cnt_en = RegInit(0.B)
      val tr_cnt = RegInit(0.U(CNT_WIDTH.W))
      val rd_mem_fst = RegInit(0.B)
      val wr_mem_st = RegInit(0.B)
      val rd_mem_st = RegInit(0.B)


      rd_mem_fst := (tsqr_en & (~hh_en))
      wr_mem_st := hh_en & (tr_cnt === (TR_CY_MACRO - 1).U) //pulse
      hh_st := hh_en & (tr_cnt === (TR_CY_MACRO).U)
      rd_mem_st := hh_en & (cnt === (VK_CY - 2).U)


      val tr_cy = RegInit(0.U(CNT_WIDTH.W))

      when(rd_mem_st) {
        tr_cy := ((total_st / 2).U - hh_cnt) * (total_st / streaming_width).U //iterations*columns left
      }.otherwise {
        tr_cy := tr_cy
      }

      val hh_fi = Wire(Bool())
      hh_fi := (tr_cnt === (TR_CY_MACRO.U + tr_cy)) //+1


      when(hh_fi) {
        tr_cnt := 0.U
      }.elsewhen(tr_cnt_en) {
        tr_cnt := tr_cnt + 1.U
      }.otherwise {
        tr_cnt := tr_cnt
      }


      when(hh_fi) {
        tr_cnt_en := 0.B
      }.elsewhen(hh_en & (cnt === (VK_CY).U)) {
        tr_cnt_en := 1.B
      }


      //val tr_cnt_en_2 = Reg(Bool())


      /*  
         when(rst){
             tr_cnt_en_2 := 0.B
         }.elsewhen(hh_fi){
             tr_cnt_en_2 := 0.B
         }.elsewhen( hh_en & (cnt === (VK_CY+2).U)){
             tr_cnt_en_2 := 1.B
         }
     */

      d1_rdy := RegNext(hh_en & cnt > 1.U & cnt < (total_st / ddot_st + 1).U) //+2
      d1_vld := RegNext(hh_en & (cnt === (DDOT1_CY).U)) //+2

      vk1_vld := RegNext(hh_en & (cnt === (VK_CY).U))

      tk_vld := RegNext(hh_en & (cnt === (TK_CY).U))


      yjp_vld := tr_cnt_en & tr_cnt < (DDOT2_CY.U + HQR10_CY.U + HQR11_CY.U + tr_cy) & (tr_cnt >= (DDOT2_CY.U + HQR10_CY.U + HQR11_CY.U))


      //yj_sft :=RegNext(tr_cnt_en & (tr_cnt < ( YJ_SFT_NO.U + tr_cy )))
      yj_sft := RegNext(tr_cnt_en) & (tr_cnt < (YJ_SFT_NO.U + tr_cy))


      val dmx0_mem_enb_reg = RegInit(0.B)
      val dmx1_mem_enb_reg = RegInit(0.B)
      val rtri_mem_enb_reg = RegInit(0.B)
      val dmx0_mem_ena_reg = RegInit(0.B)
      val dmx1_mem_ena_reg = RegInit(0.B)
      val rtri_mem_ena_reg = RegInit(0.B)
      val rd_dmx0_en = RegInit(0.B)
      val rd_dmx1_en = RegInit(0.B)
      val rd_rtri_en = RegInit(0.B)


      rd_dmx0_en := ~mx_cnt(0) & (cnt >= (VK_CY - 1).U & cnt < (VK_CY).U + tr_cy + 1.U) //pulse
      rd_dmx1_en := mx_cnt(0) & (cnt >= (VK_CY - 1).U & cnt < (VK_CY).U + tr_cy + 1.U)
      rd_rtri_en := (cnt >= (VK_CY - 1).U & cnt < (VK_CY).U + tr_cy + 1.U)


      dmx0_mem_enb_reg := (~mx_cnt(0) & (rd_mem_fst)) | rd_dmx0_en
      dmx1_mem_enb_reg := (mx_cnt(0) & (rd_mem_fst)) | rd_dmx1_en
      rtri_mem_enb_reg := rd_mem_fst | rd_rtri_en


      val dmx0_mem_addrb_reg = RegInit(0.U((log2Ceil(total_st) - 1).W))
      val dmx1_mem_addrb_reg = RegInit(0.U((log2Ceil(total_st) - 1).W))
      val rtri_mem_addrb_reg = RegInit(0.U((log2Ceil(total_st) - 1).W))

      when(rd_mem_fst) {
        dmx0_mem_addrb_reg := 0.U
      }.elsewhen(~mx_cnt(0) & (hh_en & (cnt === (VK_CY).U))) {
        dmx0_mem_addrb_reg := hh_cnt
      }.elsewhen(rd_dmx0_en) {
        dmx0_mem_addrb_reg := dmx0_mem_addrb_reg + 1.U
      }.otherwise {
        dmx0_mem_addrb_reg := dmx0_mem_addrb_reg
      }

      when(rd_mem_fst) {
        dmx1_mem_addrb_reg := 0.U
      }.elsewhen(mx_cnt(0) & (hh_en & (cnt === (VK_CY).U))) {
        dmx1_mem_addrb_reg := hh_cnt
      }.elsewhen(rd_dmx1_en) {
        dmx1_mem_addrb_reg := dmx1_mem_addrb_reg + 1.U
      }.otherwise {
        dmx1_mem_addrb_reg := dmx1_mem_addrb_reg
      }

      when(rd_mem_fst) {
        rtri_mem_addrb_reg := 0.U
      }.elsewhen((hh_en & (cnt === (VK_CY).U))) {
        rtri_mem_addrb_reg := hh_cnt
      }.elsewhen(rd_rtri_en) {
        rtri_mem_addrb_reg := rtri_mem_addrb_reg + 1.U
      }.otherwise {
        rtri_mem_addrb_reg := rtri_mem_addrb_reg
      }

      val dmx0_mem_wea_reg = RegInit(~0.U((total_st * 4).W))
      val dmx1_mem_wea_reg = RegInit(~0.U((total_st * 4).W))
      val rtri_mem_wea_reg = RegInit(~0.U((total_st * 4).W))


      when(rst) {
        dmx0_mem_ena_wire := 0.U
        dmx1_mem_ena_wire := 0.U
        rtri_mem_ena_wire := 0.U
      }.otherwise {
        dmx0_mem_ena_wire := ~mx_cnt(0) & (tr_cnt >= (TR_CY_MACRO).U) & (tr_cnt < ((TR_CY_MACRO).U + tr_cy))
        dmx1_mem_ena_wire := mx_cnt(0) & (tr_cnt >= (TR_CY_MACRO).U) & (tr_cnt < ((TR_CY_MACRO).U + tr_cy))
        rtri_mem_ena_wire := (tr_cnt >= (TR_CY_MACRO).U) & (tr_cnt < ((TR_CY_MACRO).U + tr_cy))
      }


      dmx0_mem_wea := dmx0_mem_wea_reg
      dmx1_mem_wea := dmx1_mem_wea_reg
      rtri_mem_wea := rtri_mem_wea_reg
    }

    when(~mx_cnt(0) & @@ wr_mem_st & hh_cnt >=
    1.U
    )
    {
      rtri_mem_wea_reg := rtri_mem_wea_reg >> (8.U)
    }.otherwise {
      dmx0_mem_wea_reg := dmx0_mem_wea_reg
      dmx1_mem_wea_reg := dmx1_mem_wea_reg
      rtri_mem_wea_reg := rtri_mem_wea_reg
    }

    val dmx0_mem_addra_reg = Reg(UInt((log2Ceil(total_st) - 1).W))
    val dmx1_mem_addra_reg = Reg(UInt((log2Ceil(total_st) - 1).W))
    val rtri_mem_addra_reg = Reg(UInt((log2Ceil(total_st) - 1).W))

    when(~mx_cnt(0) & (hh_en & (tr_cnt === (TR_CY_MACRO).U))) {
      dmx0_mem_addra_wire := hh_cnt
    }.elsewhen(dmx0_mem_ena_wire) {
      dmx0_mem_addra_wire := dmx0_mem_addra_reg + 1.U
    }.otherwise {
      dmx0_mem_addra_wire := dmx0_mem_addra_reg
    }

    when(mx_cnt(0) & (hh_en & (tr_cnt === (TR_CY_MACRO).U))) {
      dmx1_mem_addra_wire := hh_cnt
    }.elsewhen(dmx1_mem_ena_wire) {
      dmx1_mem_addra_wire := dmx1_mem_addra_reg + 1.U
    }.otherwise {
      dmx1_mem_addra_wire := dmx1_mem_addra_reg
    }

    when((hh_en & (tr_cnt === (TR_CY_MACRO).U))) {
      rtri_mem_addra_wire := hh_cnt
    }.elsewhen(rtri_mem_ena_wire) {
      rtri_mem_addra_wire := rtri_mem_addra_reg + 1.U
    }.otherwise {
      rtri_mem_addra_wire := rtri_mem_addra_reg
    }


    dmx0_mem_addrb := dmx0_mem_addrb_reg
    dmx1_mem_addrb := dmx1_mem_addrb_reg
    rtri_mem_addrb := rtri_mem_addrb_reg
    dmx0_mem_addra := dmx0_mem_addra_reg
    dmx1_mem_addra := dmx1_mem_addra_reg
    rtri_mem_addra := rtri_mem_addra_reg
    //switched 3/20
    mem0_fi := ~mx_cnt(0) & (tr_cnt === (TR_CY_MACRO.U + tr_cy - 1.U)) & (tr_cy === 1.U)
    mem1_fi := mx_cnt(0) & (tr_cnt === (TR_CY_MACRO.U + tr_cy - 1.U)) & (tr_cy === 1.U)

    tsqr_fi := (mem0_fi | mem1_fi) & (mx_cnt === (tile_no - 1.U)) //-1

    when(rst) {
      dmx0_mem_wea_update := ~(dmx0_mem_wea_update & 0.U)
      dmx1_mem_wea_update := ~(dmx1_mem_wea_update & 0.U)
      rtri_mem_wea_update := ~(rtri_mem_wea_update & 0.U)
    }.elsewhen(hh_en & (tr_cnt === (TR_CY_MACRO - 2).U)) {
      rtri_mem_wea_update := rtri_mem_wea_update >> (hh_cnt * 8.U)
    }.otherwise {
      dmx0_mem_wea_update := ~(dmx0_mem_wea_update & 0.U)
      dmx1_mem_wea_update := ~(dmx1_mem_wea_update & 0.U)
      rtri_mem_wea_update := ~(rtri_mem_wea_update & 0.U)
    }
    dmx0_mem_enb := dmx0_mem_enb_reg
    dmx1_mem_enb := dmx1_mem_enb_reg
    rtri_mem_enb := rtri_mem_enb_reg
    dmx0_mem_ena := dmx0_mem_ena_reg
    dmx1_mem_ena := dmx1_mem_ena_reg
    rtri_mem_ena := rtri_mem_ena_reg

  }
}
}
```



#### Error stacktrace:

```
scala.reflect.internal.Reporting.abort(Reporting.scala:69)
	scala.reflect.internal.Reporting.abort$(Reporting.scala:65)
	scala.reflect.internal.SymbolTable.abort(SymbolTable.scala:28)
	scala.reflect.internal.Types$ThisType.<init>(Types.scala:1394)
	scala.reflect.internal.Types$UniqueThisType.<init>(Types.scala:1414)
	scala.reflect.internal.Types$ThisType$.apply(Types.scala:1418)
	scala.meta.internal.pc.AutoImportsProvider$$anonfun$autoImports$3.applyOrElse(AutoImportsProvider.scala:74)
	scala.meta.internal.pc.AutoImportsProvider$$anonfun$autoImports$3.applyOrElse(AutoImportsProvider.scala:60)
	scala.collection.immutable.List.collect(List.scala:267)
	scala.meta.internal.pc.AutoImportsProvider.autoImports(AutoImportsProvider.scala:60)
	scala.meta.internal.pc.ScalaPresentationCompiler.$anonfun$autoImports$1(ScalaPresentationCompiler.scala:299)
```
#### Short summary: 

scala.reflect.internal.FatalError: 
  ThisType(value <local fsm>) for sym which is not a class
     while compiling: file:///C:/Users/blair/OneDrive/Documents/Desktop/iterative_tsqr/src/main/scala/tsqr_fsm.scala
        during phase: globalPhase=<no phase>, enteringPhase=parser
     library version: version 2.13.7
    compiler version: version 2.13.7
  reconstructed args: -classpath <WORKSPACE>\.bloop\root\bloop-bsp-clients-classes\classes-Metals-jM3agBIuReSsG3AMomTa5Q==;<HOME>\AppData\Local\bloop\cache\semanticdb\com.sourcegraph.semanticdb-javac.0.10.0\semanticdb-javac-0.10.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\scala-library\2.13.7\scala-library-2.13.7.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chiseltest_2.13\0.5.0\chiseltest_2.13-0.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3_2.13\3.5.0\chisel3_2.13-3.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\treadle_2.13\1.5.0\treadle_2.13-1.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scalatest\scalatest_2.13\3.1.4\scalatest_2.13-3.1.4.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\utest_2.13\0.7.9\utest_2.13-0.7.9.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\net\java\dev\jna\jna\5.10.0\jna-5.10.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\scala-reflect\2.13.7\scala-reflect-2.13.7.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3-macros_2.13\3.5.0\chisel3-macros_2.13-3.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\chisel3-core_2.13\3.5.0\chisel3-core_2.13-3.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\os-lib_2.13\0.8.0\os-lib_2.13-0.8.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\edu\berkeley\cs\firrtl_2.13\1.5.0\firrtl_2.13-1.5.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-jline\2.12.1\scala-jline-2.12.1.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scalactic\scalactic_2.13\3.1.4\scalactic_2.13-3.1.4.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-xml_2.13\1.2.0\scala-xml_2.13-1.2.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-sbt\test-interface\1.0\test-interface-1.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\portable-scala\portable-scala-reflect_2.13\0.1.1\portable-scala-reflect_2.13-0.1.1.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\lihaoyi\geny_2.13\0.7.0\geny_2.13-0.7.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\antlr\antlr4-runtime\4.9.3\antlr4-runtime-4.9.3.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\google\protobuf\protobuf-java\3.18.0\protobuf-java-3.18.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\github\scopt\scopt_2.13\3.7.1\scopt_2.13-3.7.1.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\net\jcazevedo\moultingyaml_2.13\0.4.2\moultingyaml_2.13-0.4.2.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-native_2.13\3.6.12\json4s-native_2.13-3.6.12.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\apache\commons\commons-text\1.9\commons-text-1.9.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\io\github\alexarchambault\data-class_2.13\0.2.5\data-class_2.13-0.2.5.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\scala-lang\modules\scala-parallel-collections_2.13\1.0.4\scala-parallel-collections_2.13-1.0.4.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\fusesource\jansi\jansi\1.11\jansi-1.11.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\github\nscala-time\nscala-time_2.13\2.22.0\nscala-time_2.13-2.22.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\yaml\snakeyaml\1.26\snakeyaml-1.26.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-core_2.13\3.6.12\json4s-core_2.13-3.6.12.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\apache\commons\commons-lang3\3.11\commons-lang3-3.11.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\joda-time\joda-time\2.10.1\joda-time-2.10.1.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\joda\joda-convert\2.2.0\joda-convert-2.2.0.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-ast_2.13\3.6.12\json4s-ast_2.13-3.6.12.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\org\json4s\json4s-scalap_2.13\3.6.12\json4s-scalap_2.13-3.6.12.jar;<HOME>\AppData\Local\Coursier\cache\v1\https\repo1.maven.org\maven2\com\thoughtworks\paranamer\paranamer\2.8\paranamer-2.8.jar -Xplugin-require:semanticdb -Yrangepos -Ymacro-expand:discard -Ycache-plugin-class-loader:last-modified -Ypresentation-any-thread

  last tree to typer: Ident(rtri_mem_wea_reg)
       tree position: line 292 of file:///C:/Users/blair/OneDrive/Documents/Desktop/iterative_tsqr/src/main/scala/tsqr_fsm.scala
            tree tpe: <error>
              symbol: value <error: <none>>
   symbol definition: val <error: <none>>: <error> (a TermSymbol)
      symbol package: tsqr_fsm_package
       symbol owners: value <error: <none>> -> value <local fsm> -> class fsm -> object chisel_fsm
           call site: <none> in <none>

== Source file context for tree position ==

   289         }.otherwise{
   290             dmx0_mem_wea_reg := dmx0_mem_wea_reg
   291             dmx1_mem_wea_reg := dmx1_mem_wea_reg
   292             rtri_mem_wea_reg := rtri_mem_wea_reg
   293         }
   294 
   295         val dmx0_mem_addra_reg = Reg(UInt((log2Ceil(total_st)-1).W))